{"version":3,"sources":["rehook/core.cljs"],"mappings":";;;AAGA,AAAA,AAAMA,AACHC;AADH,AAEE,AAACC,AAAeD;;AAElB,AAAA,AAAA,AAAAE,AAAME;AAAN,AAAA,AAAAD,AAAA,AAAA;AAAA,AAAA,AAAAA;AAAA;AAAA,AAAAC,AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA;;;;;AAAA,AAAA,AAAA,AAAMD,AACFE;AADJ,AAEG,AAACC,AAAgBD;;;AAFpB,AAAA,AAAA,AAAMF,AAGFE,AAAEE;AAHN,AAIG,AAAAC,AAAiBH;AAAjBI,AAAmB,AAACC,AAASH;AAA7B,AAAA,AAAAC,AAAAC,AAACH;;;AAJJ,AAAA,AAAA,AAAMH;;AAAN,AAMA,AAAA,AAAMQ,AACHC,AAAEC,AAAUC;AADf,AAEE,AAAAC,AAAoB,AAACjB,AAAU,AAAAsB,AAAA,AAAAC,AAAYT;AAAZ,AAAA,AAAAQ,AAAAA,AAACP,AAAAA,AAAAA;;AAAhC,AAAAG,AAAAD,AAAA,AAAA,AAAOG;AAAP,AAAAF,AAAAD,AAAA,AAAA,AAAWI;AAAX,AAEE,AAACG,AACA;;AAAA,AACE,AAAMC,AAAG,AAAK,AAACC;AAAf,AACE,AAACC,AAAUb,AAAEW,AAAG;AAAKG,AAAEA,AAAEA,AAAEC;AAAX,AAAuB,AAAAC,AAAS,AAACf,AAAAA,AAAAA,AAAUc,AAAAA;AAApB,AAAA,AAAAC,AAAAA,AAACT,AAAAA,AAAAA;;;;AAD1C;;AAAA,AAEG,AAACU,AAAajB,AAAEW;;;;AAJtB;;AAFF,AAAA,AASGL;AATHD;AAAA,AASQ,AAAAA,AAACa,AAAMlB,AAAEE;;;;AAEnB;;;AAAA,AAAMiB,AAEHnB;AAFH,AAGE,AAACD,AAAYC,AAAEoB,AAAS,AAAKN,AAAEO;AAAP,AAAUA;;;AAEpC;;;AAAA,AAAMC,AAEHtB,AAAEuB;AAFL,AAGE,AAAA,AAAAC,AAACzB,AAAYC;AAAb,AAAgB,AAAAwB,AAACG,AAASJ;AAA1B,AAAAE,AAAAC;AAAA,AAAiC,AAAAD,AAAAC,AAACE,AAAYL","names":["rehook.core/use-state","initial-value","js/module$node_modules$react$index.useState","var_args","G__43420","rehook.core/use-effect","js/Error","f","js/module$node_modules$react$index.useEffect","deps","G__43421","G__43422","cljs.core/to-array","rehook.core/use-atom-fn","a","getter-fn","setter-fn","vec__43424","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","p1__43423#","val","set-val","G__43427","cljs.core/deref","rehook.core.use_effect.cljs$core$IFn$_invoke$arity$2","id","cljs.core/random-uuid","cljs.core/add-watch","_","next-state","G__43428","cljs.core/remove-watch","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3","rehook.core/use-atom","cljs.core/identity","v","rehook.core/use-atom-path","path","p1__43429#","p1__43437#","p2__43438#","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","cljs.core/assoc-in"],"sourcesContent":["(ns rehook.core\n  (:require [\"react\" :as react]))\n\n(defn use-state\n  [initial-value]\n  (react/useState initial-value))\n\n(defn use-effect\n  ([f]\n   (react/useEffect f))\n  ([f deps]\n   (react/useEffect f (to-array deps))))\n\n(defn use-atom-fn\n  [a getter-fn setter-fn]\n  (let [[val set-val] (use-state (getter-fn @a))]\n\n    (use-effect\n     (fn []\n       (let [id (str (random-uuid))]\n         (add-watch a id (fn [_ _ _ next-state] (set-val (getter-fn next-state))))\n         #(remove-watch a id)))\n     [])\n\n    [val #(swap! a setter-fn %)]))\n\n(defn use-atom\n  \"(use-atom my-atom)\"\n  [a]\n  (use-atom-fn a identity (fn [_ v] v)))\n\n(defn use-atom-path\n  \"(use-atom my-atom [:path :to :data])\"\n  [a path]\n  (use-atom-fn a #(get-in % path) #(assoc-in %1 path %2)))\n"]}